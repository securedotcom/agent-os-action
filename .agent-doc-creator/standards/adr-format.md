# ADR Format Standard

Standard format for Architecture Decision Records.

## ADR Template

````markdown
---
title: ADR-{number}: {Title}
sidebar_position: {number}
ai_generated: true
status: Accepted
date: 2024-11-07
decision_makers: [team-name]
tags: [category, technology]
---

> ⚠️ **AI-Generated Documentation**
> This ADR was generated by an AI agent based on codebase analysis.
> Please review and validate the context, decision, and consequences.

# ADR-{number}: {Title}

## Status

**Accepted** | Draft | Deprecated | Superseded

Date: 2024-11-07

## Context

[Describe the issue or problem that necessitated this decision]

What factors influenced this decision:
- Technical constraints
- Business requirements
- Team expertise
- Timeline considerations
- Cost factors

## Decision

[State the decision clearly and concisely]

We will [decision statement].

## Consequences

### Positive

- [Benefit 1]
- [Benefit 2]
- [Benefit 3]

### Negative

- [Tradeoff 1]
- [Tradeoff 2]
- [Risk 1]

### Neutral

- [Impact 1]
- [Impact 2]

## Alternatives Considered

### Alternative 1: [Name]
- **Pros**: [Benefits]
- **Cons**: [Drawbacks]
- **Why not chosen**: [Reason]

### Alternative 2: [Name]
- **Pros**: [Benefits]
- **Cons**: [Drawbacks]
- **Why not chosen**: [Reason]

## Implementation Notes

[Technical details about how this decision is implemented]

Key files/components:
- `path/to/file.ts`
- `path/to/config.yml`

## References

- [Link to related ADRs]
- [External documentation]
- [Discussion threads]

## Review Notes

[Section for human reviewers to add notes]
````

## Frontmatter Fields

Required:
- `title`: ADR-NNNN: Title format
- `status`: Current status
- `date`: Decision date (YYYY-MM-DD)

Optional:
- `ai_generated`: true (if AI-generated)
- `decision_makers`: List of people/teams
- `tags`: Categorization tags
- `supersedes`: Link to superseded ADR
- `superseded_by`: Link to superseding ADR

## Numbering

Format: `NNNN-kebab-case-title.md`

Examples:
- `0001-use-postgresql-database.md`
- `0002-use-express-api-server.md`
- `0010-migrate-to-typescript.md`

Rules:
- Zero-padded to 4 digits
- Sequential numbering
- No gaps allowed
- Never reuse numbers

## Status Values

### Draft
- Under discussion
- Not yet decided
- Gathering feedback

### Accepted
- Decision made
- Being implemented
- Current practice

### Deprecated
- No longer relevant
- Not recommended
- Historical record

### Superseded
- Replaced by newer ADR
- Link to replacement
- Keep for history

## Writing Guidelines

### Context Section
- Explain the problem clearly
- Describe constraints
- Provide background
- Include relevant data/metrics
- Make it understandable to future readers

### Decision Section
- State decision in one clear sentence
- Explain reasoning
- Describe implementation approach
- Include technical details
- Link to evidence in code

### Consequences Section
- Be honest about tradeoffs
- Consider all impacts:
  - Technical
  - Operational
  - Team/organizational
  - Cost
  - Performance
- Think short-term and long-term
- Acknowledge risks

### Alternatives Section
- List at least 2-3 alternatives
- Be fair in describing each
- Explain why not chosen
- Show due diligence

## Common ADR Topics

### Technology Choices
- Database selection
- Framework selection
- Language choice
- Cloud provider
- Message broker

### Architecture Patterns
- Microservices vs monolith
- Event-driven architecture
- API design (REST/GraphQL/gRPC)
- State management
- Caching strategy

### Infrastructure
- Deployment platform
- CI/CD tools
- Monitoring/logging
- Container orchestration
- Infrastructure as Code

### Security
- Authentication method
- Authorization approach
- Secret management
- Encryption strategy
- API security

### Development Practices
- Testing strategy
- Code review process
- Branching strategy
- Documentation approach
- Error handling

## AI-Generated ADRs

### Requirements
1. Must have clear evidence in codebase
2. Must include AI disclaimer
3. Must mark uncertainty
4. Must link to evidence
5. Must request human review

### Uncertainty Markers
Use when evidence is weak:
```markdown
## Context

Based on the presence of `pg` library in package.json, this project
**appears to use** PostgreSQL.

**TODO**: Validate the reasoning for choosing PostgreSQL over alternatives.
```

### Evidence Linking
Always link to proof:
```markdown
## Implementation Notes

The PostgreSQL configuration is in `config/database.yml` (lines 10-15).
Connection pooling is configured in `src/db/pool.ts` (lines 5-20).
```

## Review Checklist

Before finalizing ADR:
- [ ] Title is clear and descriptive
- [ ] Status is correct
- [ ] Context explains the problem
- [ ] Decision is stated clearly
- [ ] Consequences are honest and complete
- [ ] At least 2 alternatives listed
- [ ] Implementation details included
- [ ] References provided
- [ ] No secrets exposed
- [ ] Proper numbering
- [ ] Frontmatter complete

## Examples

### Good ADR Title
✅ "ADR-0001: Use PostgreSQL as Primary Database"
✅ "ADR-0005: Implement JWT for API Authentication"
✅ "ADR-0012: Migrate to Kubernetes for Orchestration"

### Bad ADR Title
❌ "Database Decision" (too vague)
❌ "Use Postgres" (not specific enough)
❌ "Why we chose PostgreSQL over MySQL and MongoDB" (too long)

## Related Standards

- [Documentation Style Guide](./doc-style.md)
- [Frontmatter Standards](./frontmatter-standards.md)
- [AI Disclaimer](./ai-disclaimer.md)

